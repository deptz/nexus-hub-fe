{
    "openapi": "3.1.0",
    "info": {
      "title": "AI Orchestrator API",
      "description": "\n    AI Orchestrator API provides a unified interface for managing multi-tenant AI conversations,\n    knowledge bases, prompts, and tools across multiple LLM providers (OpenAI, Gemini).\n    \n    ## Features\n    \n    - **Message Processing**: Send and receive messages through various channels (web, telegram, etc.)\n    - **Knowledge Base Management**: Create and manage knowledge bases for RAG (Retrieval Augmented Generation)\n    - **Prompt Management**: Configure and update tenant-specific system prompts\n    - **Logging & Debugging**: View event logs and tool call logs for debugging\n    - **API Key Management**: Create and manage API keys for tenant access\n    \n    ## Authentication\n    \n    Most endpoints require API key authentication via:\n    - Header: `X-API-Key: \u003Cyour-api-key\u003E`\n    - Query parameter: `?api_key=\u003Cyour-api-key\u003E`\n    \n    **Test Mode**: When `SWAGGER_TEST_MODE=true` is set in non-production environments, \n    authentication may be bypassed for testing purposes.\n    ",
      "version": "1.0.0"
    },
    "paths": {
      "/messages/inbound": {
        "post": {
          "tags": [
            "Messages"
          ],
          "summary": "Handle Inbound Message",
          "description": "Handle inbound canonical message.\n\nRequires API key authentication via X-API-Key header or api_key query parameter.\n\nProcesses an inbound message through the orchestrator pipeline:\n1. Resolves tenant context\n2. Gets/creates conversation\n3. Persists inbound message\n4. Builds prompts with conversation history\n5. Calls LLM with tools\n6. Executes tool calls if needed\n7. Generates and persists outbound message\n8. Returns response with latency and tool call count\n\n**Example Request:**\n```json\n{\n    \"tenant_id\": \"uuid\",\n    \"channel\": \"web\",\n    \"direction\": \"inbound\",\n    \"from\": {\"type\": \"user\", \"external_id\": \"user-123\"},\n    \"to\": {\"type\": \"bot\", \"external_id\": \"\"},\n    \"content\": {\"type\": \"text\", \"text\": \"Hello\"}\n}\n```\n\n**Query Parameters:**\n- `async_processing`: If True, queues message for background processing and returns job ID",
          "operationId": "handle_inbound_message_messages_inbound_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "async_processing",
              "in": "query",
              "required": false,
              "schema": {
                "type": "boolean",
                "description": "If True, queue for async processing",
                "default": false,
                "title": "Async Processing"
              },
              "description": "If True, queue for async processing"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CanonicalMessage"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/InboundMessageResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/messages/status/{job_id}": {
        "get": {
          "tags": [
            "Messages"
          ],
          "summary": "Get Message Status",
          "description": "Get status of a queued message processing job.\n\nReturns the current status of an asynchronously processed message.\nStatus can be: 'queued', 'processing', 'completed', or 'failed'.\n\n**Returns:**\n- If completed: Full response with outbound message\n- If failed: Error details\n- If queued/processing: Current status",
          "operationId": "get_message_status_messages_status__job_id__get",
          "parameters": [
            {
              "name": "job_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Job Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/messages": {
        "get": {
          "tags": [
            "Messages"
          ],
          "summary": "List Messages",
          "description": "List all messages for a tenant.",
          "operationId": "list_messages_tenants__tenant_id__messages_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by conversation ID",
                "title": "Conversation Id"
              },
              "description": "Filter by conversation ID"
            },
            {
              "name": "direction",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by direction: 'inbound' or 'outbound'",
                "title": "Direction"
              },
              "description": "Filter by direction: 'inbound' or 'outbound'"
            },
            {
              "name": "content_type",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by content type",
                "title": "Content Type"
              },
              "description": "Filter by content type"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            },
            {
              "name": "sort_by",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Sort field: 'created_at'",
                "default": "created_at",
                "title": "Sort By"
              },
              "description": "Sort field: 'created_at'"
            },
            {
              "name": "sort_order",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Sort order: 'asc' or 'desc'",
                "default": "desc",
                "title": "Sort Order"
              },
              "description": "Sort order: 'asc' or 'desc'"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MessageListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/messages/{message_id}": {
        "get": {
          "tags": [
            "Messages"
          ],
          "summary": "Get Message",
          "description": "Get message details by ID.",
          "operationId": "get_message_tenants__tenant_id__messages__message_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "message_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Message Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MessageResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/conversations": {
        "get": {
          "tags": [
            "Conversations"
          ],
          "summary": "List Conversations",
          "description": "List all conversations for a tenant.",
          "operationId": "list_conversations_tenants__tenant_id__conversations_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "status",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by status: 'open', 'closed', 'archived'",
                "title": "Status"
              },
              "description": "Filter by status: 'open', 'closed', 'archived'"
            },
            {
              "name": "channel_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by channel ID",
                "title": "Channel Id"
              },
              "description": "Filter by channel ID"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            },
            {
              "name": "sort_by",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Sort field: 'created_at', 'updated_at'",
                "default": "created_at",
                "title": "Sort By"
              },
              "description": "Sort field: 'created_at', 'updated_at'"
            },
            {
              "name": "sort_order",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Sort order: 'asc' or 'desc'",
                "default": "desc",
                "title": "Sort Order"
              },
              "description": "Sort order: 'asc' or 'desc'"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ConversationListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/conversations/{conversation_id}": {
        "get": {
          "tags": [
            "Conversations"
          ],
          "summary": "Get Conversation",
          "description": "Get conversation details by ID.",
          "operationId": "get_conversation_tenants__tenant_id__conversations__conversation_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ConversationResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "put": {
          "tags": [
            "Conversations"
          ],
          "summary": "Update Conversation",
          "description": "Update conversation (subject, status).",
          "operationId": "update_conversation_tenants__tenant_id__conversations__conversation_id__put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateConversationRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ConversationResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Conversations"
          ],
          "summary": "Delete Conversation",
          "description": "Delete/archive a conversation.",
          "operationId": "delete_conversation_tenants__tenant_id__conversations__conversation_id__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/conversations/{conversation_id}/stats": {
        "get": {
          "tags": [
            "Conversations"
          ],
          "summary": "Get Conversation Stats",
          "description": "Get conversation statistics.",
          "operationId": "get_conversation_stats_tenants__tenant_id__conversations__conversation_id__stats_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ConversationStatsResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/conversations/{conversation_id}/resolve": {
        "put": {
          "tags": [
            "Conversations"
          ],
          "summary": "Resolve Conversation",
          "description": "Mark conversation as resolved or unresolved.",
          "operationId": "resolve_conversation_tenants__tenant_id__conversations__conversation_id__resolve_put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            },
            {
              "name": "resolved",
              "in": "query",
              "required": false,
              "schema": {
                "type": "boolean",
                "description": "Set resolved status",
                "default": true,
                "title": "Resolved"
              },
              "description": "Set resolved status"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/conversations/{conversation_id}/messages": {
        "get": {
          "tags": [
            "Messages"
          ],
          "summary": "List Conversation Messages",
          "description": "List all messages in a conversation.",
          "operationId": "list_conversation_messages_tenants__tenant_id__conversations__conversation_id__messages_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            },
            {
              "name": "direction",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by direction: 'inbound' or 'outbound'",
                "title": "Direction"
              },
              "description": "Filter by direction: 'inbound' or 'outbound'"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            },
            {
              "name": "sort_order",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Sort order: 'asc' (chronological) or 'desc'",
                "default": "asc",
                "title": "Sort Order"
              },
              "description": "Sort order: 'asc' (chronological) or 'desc'"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MessageListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/analytics/conversations": {
        "get": {
          "tags": [
            "Analytics"
          ],
          "summary": "Get Conversation Analytics",
          "description": "Get conversation analytics for a tenant.",
          "operationId": "get_conversation_analytics_tenants__tenant_id__analytics_conversations_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ConversationAnalyticsResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/analytics/costs": {
        "get": {
          "tags": [
            "Analytics"
          ],
          "summary": "Get Cost Analytics",
          "description": "Get cost analytics summary for a tenant.",
          "operationId": "get_cost_analytics_tenants__tenant_id__analytics_costs_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CostSummaryResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/analytics/kpis": {
        "get": {
          "tags": [
            "Analytics"
          ],
          "summary": "List Kpi Snapshots",
          "description": "List KPI snapshots for a tenant.",
          "operationId": "list_kpi_snapshots_tenants__tenant_id__analytics_kpis_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "period_type",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by period type: 'daily', 'weekly', 'monthly'",
                "title": "Period Type"
              },
              "description": "Filter by period type: 'daily', 'weekly', 'monthly'"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 date)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 date)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 date)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 date)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/KPISnapshotsListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/analytics/kpis/{period_type}": {
        "get": {
          "tags": [
            "Analytics"
          ],
          "summary": "Get Kpis By Period",
          "description": "Get KPI snapshots for a specific period.",
          "operationId": "get_kpis_by_period_tenants__tenant_id__analytics_kpis__period_type__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "period_type",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Period Type"
              }
            },
            {
              "name": "period_start",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Period start date (ISO8601 date)",
                "title": "Period Start"
              },
              "description": "Period start date (ISO8601 date)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/KPISnapshotsListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/analytics/kpis/compute": {
        "post": {
          "tags": [
            "Analytics"
          ],
          "summary": "Compute Kpis",
          "description": "Trigger KPI computation for a tenant.",
          "operationId": "compute_kpis_tenants__tenant_id__analytics_kpis_compute_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "period_type",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Period type: 'daily', 'weekly', 'monthly'",
                "default": "daily",
                "title": "Period Type"
              },
              "description": "Period type: 'daily', 'weekly', 'monthly'"
            },
            {
              "name": "period_start",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Period start date (ISO8601 date)",
                "title": "Period Start"
              },
              "description": "Period start date (ISO8601 date)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/analytics/usage": {
        "get": {
          "tags": [
            "Analytics"
          ],
          "summary": "Get Usage Statistics",
          "description": "Get usage statistics for a tenant.",
          "operationId": "get_usage_statistics_tenants__tenant_id__analytics_usage_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UsageStatisticsResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/costs": {
        "get": {
          "tags": [
            "Costs"
          ],
          "summary": "Get Cost Summary",
          "description": "Get cost summary for a tenant. Alias for /analytics/costs.",
          "operationId": "get_cost_summary_tenants__tenant_id__costs_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CostSummaryResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/costs/breakdown": {
        "get": {
          "tags": [
            "Costs"
          ],
          "summary": "Get Cost Breakdown",
          "description": "Get detailed cost breakdown for a tenant.",
          "operationId": "get_cost_breakdown_tenants__tenant_id__costs_breakdown_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CostBreakdownResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/costs/by-period": {
        "get": {
          "tags": [
            "Costs"
          ],
          "summary": "Get Costs By Period",
          "description": "Get costs grouped by time period.",
          "operationId": "get_costs_by_period_tenants__tenant_id__costs_by_period_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "period_type",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "description": "Period type: 'daily', 'weekly', 'monthly'",
                "default": "daily",
                "title": "Period Type"
              },
              "description": "Period type: 'daily', 'weekly', 'monthly'"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 date)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 date)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 date)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 date)"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CostByPeriodResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/costs/by-conversation": {
        "get": {
          "tags": [
            "Costs"
          ],
          "summary": "Get Costs By Conversation",
          "description": "Get costs per conversation.",
          "operationId": "get_costs_by_conversation_tenants__tenant_id__costs_by_conversation_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CostByConversationResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/costs/estimate": {
        "post": {
          "tags": [
            "Costs"
          ],
          "summary": "Estimate Cost",
          "description": "Estimate cost for an LLM API call.",
          "operationId": "estimate_cost_tenants__tenant_id__costs_estimate_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CostEstimateRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CostEstimateResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/logs/events": {
        "get": {
          "tags": [
            "Logs"
          ],
          "summary": "Get Event Logs",
          "description": "Get event logs for a tenant.",
          "operationId": "get_event_logs_tenants__tenant_id__logs_events_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by conversation ID",
                "title": "Conversation Id"
              },
              "description": "Filter by conversation ID"
            },
            {
              "name": "event_type",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by event type",
                "title": "Event Type"
              },
              "description": "Filter by event type"
            },
            {
              "name": "provider",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by provider",
                "title": "Provider"
              },
              "description": "Filter by provider"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/LogQueryResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/logs/tool-calls": {
        "get": {
          "tags": [
            "Logs"
          ],
          "summary": "Get Tool Call Logs",
          "description": "Get tool call logs for a tenant.",
          "operationId": "get_tool_call_logs_tenants__tenant_id__logs_tool_calls_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by conversation ID",
                "title": "Conversation Id"
              },
              "description": "Filter by conversation ID"
            },
            {
              "name": "tool_name",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by tool name",
                "title": "Tool Name"
              },
              "description": "Filter by tool name"
            },
            {
              "name": "status",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by status: 'success' or 'failure'",
                "title": "Status"
              },
              "description": "Filter by status: 'success' or 'failure'"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/LogQueryResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/traces/llm": {
        "get": {
          "tags": [
            "Logs"
          ],
          "summary": "List Llm Traces",
          "description": "List LLM traces for a tenant.\n\nRequires API key authentication. Returns full request/response payloads for LLM API calls.\nUseful for debugging, prompt engineering, and audit trails.\n\n**Security Note**: These traces may contain sensitive data. Access should be restricted.",
          "operationId": "list_llm_traces_tenants__tenant_id__traces_llm_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by conversation ID",
                "title": "Conversation Id"
              },
              "description": "Filter by conversation ID"
            },
            {
              "name": "message_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by message ID",
                "title": "Message Id"
              },
              "description": "Filter by message ID"
            },
            {
              "name": "provider",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by provider: 'openai' or 'gemini'",
                "title": "Provider"
              },
              "description": "Filter by provider: 'openai' or 'gemini'"
            },
            {
              "name": "model",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by model name",
                "title": "Model"
              },
              "description": "Filter by model name"
            },
            {
              "name": "start_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Start date (ISO8601 timestamp)",
                "title": "Start Date"
              },
              "description": "Start date (ISO8601 timestamp)"
            },
            {
              "name": "end_date",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "End date (ISO8601 timestamp)",
                "title": "End Date"
              },
              "description": "End date (ISO8601 timestamp)"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/LLMTraceListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/traces/llm/{trace_id}": {
        "get": {
          "tags": [
            "Logs"
          ],
          "summary": "Get Llm Trace",
          "description": "Get LLM trace details by ID.\n\nRequires API key authentication. Returns full request/response payload for a specific LLM trace.",
          "operationId": "get_llm_trace_tenants__tenant_id__traces_llm__trace_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "trace_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Trace Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/LLMTraceResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/conversations/{conversation_id}/traces": {
        "get": {
          "tags": [
            "Logs"
          ],
          "summary": "Get Conversation Traces",
          "description": "Get all LLM traces for a conversation.\n\nRequires API key authentication. Returns all LLM traces associated with a specific conversation.\nUseful for debugging conversation flows and understanding LLM interactions.",
          "operationId": "get_conversation_traces_tenants__tenant_id__conversations__conversation_id__traces_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "conversation_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Conversation Id"
              }
            },
            {
              "name": "provider",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by provider: 'openai' or 'gemini'",
                "title": "Provider"
              },
              "description": "Filter by provider: 'openai' or 'gemini'"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/LLMTraceListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/messages/{message_id}/trace": {
        "get": {
          "tags": [
            "Logs"
          ],
          "summary": "Get Message Trace",
          "description": "Get LLM trace for a specific message.\n\nRequires API key authentication. Returns the LLM trace associated with a specific message.\nUseful for understanding how a particular message was processed.",
          "operationId": "get_message_trace_tenants__tenant_id__messages__message_id__trace_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "message_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Message Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/LLMTraceResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/webhooks/telegram": {
        "post": {
          "tags": [
            "Webhooks"
          ],
          "summary": "Handle Telegram Webhook",
          "description": "Handle Telegram webhook updates.",
          "operationId": "handle_telegram_webhook_webhooks_telegram_post",
          "parameters": [
            {
              "name": "tenant_id",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Tenant ID (or set TELEGRAM_DEFAULT_TENANT_ID env var)",
                "title": "Tenant Id"
              },
              "description": "Tenant ID (or set TELEGRAM_DEFAULT_TENANT_ID env var)"
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Update"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TelegramWebhookResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/health": {
        "get": {
          "tags": [
            "Health"
          ],
          "summary": "Health Check",
          "description": "Combined health check endpoint.",
          "operationId": "health_check_health_get",
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            }
          }
        }
      },
      "/health/live": {
        "get": {
          "tags": [
            "Health"
          ],
          "summary": "Liveness Probe",
          "description": "Liveness probe - indicates if the process is running.",
          "operationId": "liveness_probe_health_live_get",
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            }
          }
        }
      },
      "/health/ready": {
        "get": {
          "tags": [
            "Health"
          ],
          "summary": "Readiness Probe",
          "description": "Readiness probe - checks database connectivity.",
          "operationId": "readiness_probe_health_ready_get",
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            }
          }
        }
      },
      "/metrics": {
        "get": {
          "tags": [
            "Health"
          ],
          "summary": "Metrics",
          "description": "Prometheus metrics endpoint.",
          "operationId": "metrics_metrics_get",
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/prompt": {
        "put": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Update Tenant Prompt",
          "description": "Update tenant system prompt with validation.\n\nRequires API key authentication. Only the tenant owner or master key can update prompts.\n\nThe prompt will be validated for security (e.g., no meta-instruction attempts).\nIf validation fails, a 400 error is returned with details.\n\n**Example Request:**\n```json\n{\n    \"custom_system_prompt\": \"You are a helpful assistant for ACME Corp.\",\n    \"override_mode\": \"append\"\n}\n```",
          "operationId": "update_tenant_prompt_tenants__tenant_id__prompt_put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdatePromptRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/PromptUpdateResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "get": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Get Tenant Prompt",
          "description": "Get current tenant prompt configuration.\n\nRequires API key authentication. Returns the current custom system prompt,\noverride mode, and timestamps.\n\nReturns 404 if no prompt has been configured for this tenant.",
          "operationId": "get_tenant_prompt_tenants__tenant_id__prompt_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/GetPromptResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Delete Tenant Prompt",
          "description": "Delete/remove tenant prompt (revert to default).\n\nRequires API key authentication. Permanently removes the custom prompt\nfor this tenant, reverting to default behavior.\n\nReturns success even if no prompt exists (idempotent).",
          "operationId": "delete_tenant_prompt_tenants__tenant_id__prompt_delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/tools": {
        "get": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "List Tenant Tools",
          "description": "List all tools enabled for a tenant.\n\nRequires API key authentication. Returns all tools that have been configured\nfor this tenant, including their enabled/disabled status and configuration overrides.\n\nBy default, only enabled tools are returned. Set `include_disabled=true` to see all tools.\n\n**Example Response:**\n```json\n{\n    \"items\": [\n        {\n            \"tool_id\": \"uuid\",\n            \"tool_name\": \"openai_file_search\",\n            \"description\": \"Search documents using OpenAI file search\",\n            \"provider\": \"openai_file\",\n            \"is_enabled\": true,\n            \"config_override\": {},\n            \"created_at\": \"2024-01-01T00:00:00Z\",\n            \"updated_at\": \"2024-01-01T00:00:00Z\"\n        }\n    ],\n    \"count\": 1\n}\n```",
          "operationId": "list_tenant_tools_tenants__tenant_id__tools_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "include_disabled",
              "in": "query",
              "required": false,
              "schema": {
                "type": "boolean",
                "description": "Include disabled tools in the response",
                "default": false,
                "title": "Include Disabled"
              },
              "description": "Include disabled tools in the response"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TenantToolsListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Enable Tool For Tenant",
          "description": "Enable a tool for a tenant.\n\nRequires API key authentication. Enables a tool for the specified tenant.\nIf the tool is already enabled, updates the configuration override.\n\nThe tool must exist in the `tools` table. You can enable multiple tools per tenant.\n\n**Example Request:**\n```json\n{\n    \"tool_name\": \"openai_file_search\",\n    \"config_override\": {\n        \"kb_name\": \"custom_kb\"\n    }\n}\n```\n\n**Example Response:**\n```json\n{\n    \"tool_id\": \"uuid\",\n    \"tool_name\": \"openai_file_search\",\n    \"description\": \"Search documents using OpenAI file search\",\n    \"provider\": \"openai_file\",\n    \"is_enabled\": true,\n    \"config_override\": {\"kb_name\": \"custom_kb\"},\n    \"created_at\": \"2024-01-01T00:00:00Z\",\n    \"updated_at\": \"2024-01-01T00:00:00Z\"\n}\n```",
          "operationId": "enable_tool_for_tenant_tenants__tenant_id__tools_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EnableToolRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TenantToolResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/tools/{tool_name}": {
        "put": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Update Tool Policy",
          "description": "Update a tool policy for a tenant (enable/disable or update config).\n\nRequires API key authentication. Updates the tool policy for the specified tenant.\nYou can enable/disable the tool or update its configuration override.\n\n**Example Request:**\n```json\n{\n    \"is_enabled\": false,\n    \"config_override\": {\n        \"kb_name\": \"updated_kb\"\n    }\n}\n```",
          "operationId": "update_tool_policy_tenants__tenant_id__tools__tool_name__put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "tool_name",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tool Name"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateToolPolicyRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/TenantToolResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Disable Tool For Tenant",
          "description": "Disable a tool for a tenant (or delete the policy).\n\nRequires API key authentication. Permanently removes the tool policy for this tenant,\neffectively disabling the tool. The tool itself remains in the system.\n\nReturns success even if the tool is not enabled for this tenant (idempotent).",
          "operationId": "disable_tool_for_tenant_tenants__tenant_id__tools__tool_name__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "tool_name",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tool Name"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/api-keys": {
        "post": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Create Api Key Endpoint",
          "description": "Create a new API key for a tenant.\n\nRequires API key authentication. Only the tenant owner or master key can create API keys.\n\n**WARNING**: The API key is only returned once in the response. Store it securely!\n\nReturns:\n    API key object with the plain text key (shown only once)",
          "operationId": "create_api_key_endpoint_tenants__tenant_id__api_keys_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateAPIKeyRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "get": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "List Api Keys Endpoint",
          "description": "List all API keys for a tenant.\n\nRequires API key authentication. Only the tenant owner or master key can list API keys.\n\nArgs:\n    tenant_id: Tenant ID\n    include_inactive: Whether to include inactive/expired keys\n\nReturns:\n    List of API key info (without the actual keys)",
          "operationId": "list_api_keys_endpoint_tenants__tenant_id__api_keys_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "include_inactive",
              "in": "query",
              "required": false,
              "schema": {
                "type": "boolean",
                "description": "Include inactive/expired keys",
                "default": false,
                "title": "Include Inactive"
              },
              "description": "Include inactive/expired keys"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/api-keys/{key_id}": {
        "delete": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Revoke Api Key Endpoint",
          "description": "Revoke or delete an API key.\n\nRequires API key authentication. Only the tenant owner or master key can revoke API keys.\n\nArgs:\n    tenant_id: Tenant ID\n    key_id: API key ID to revoke\n    permanent: If True, permanently delete the key. If False, just deactivate it.\n\nReturns:\n    Success message",
          "operationId": "revoke_api_key_endpoint_tenants__tenant_id__api_keys__key_id__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "key_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Key Id"
              }
            },
            {
              "name": "permanent",
              "in": "query",
              "required": false,
              "schema": {
                "type": "boolean",
                "description": "If True, permanently delete the key. If False, just deactivate it.",
                "default": false,
                "title": "Permanent"
              },
              "description": "If True, permanently delete the key. If False, just deactivate it."
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/knowledge-bases": {
        "post": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Create Knowledge Base",
          "description": "Create a new knowledge base for a tenant.\n\nRequires API key authentication. Automatically syncs to all enabled providers.\nNo need to specify provider or provider_config - system auto-detects enabled tools.\n\n**Example Request:**\n```json\n{\n    \"name\": \"support_faq\",\n    \"description\": \"Support FAQ knowledge base\"\n}\n```",
          "operationId": "create_knowledge_base_tenants__tenant_id__knowledge_bases_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateKnowledgeBaseRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/KnowledgeBaseResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "get": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "List Knowledge Bases",
          "description": "List all knowledge bases for a tenant.\n\nRequires API key authentication. Supports optional filtering by provider and active status.",
          "operationId": "list_knowledge_bases_tenants__tenant_id__knowledge_bases_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "provider",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by provider",
                "title": "Provider"
              },
              "description": "Filter by provider"
            },
            {
              "name": "is_active",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by active status",
                "title": "Is Active"
              },
              "description": "Filter by active status"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/KnowledgeBasesListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/knowledge-bases/{kb_id}": {
        "get": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Get Knowledge Base",
          "description": "Get knowledge base details by ID.\n\nRequires API key authentication. Returns 404 if not found.",
          "operationId": "get_knowledge_base_tenants__tenant_id__knowledge_bases__kb_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Kb Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/KnowledgeBaseResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "put": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Update Knowledge Base",
          "description": "Update knowledge base configuration.\n\nRequires API key authentication. Only provided fields will be updated.",
          "operationId": "update_knowledge_base_tenants__tenant_id__knowledge_bases__kb_id__put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Kb Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateKnowledgeBaseRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/KnowledgeBaseResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Delete Knowledge Base",
          "description": "Delete or deactivate a knowledge base.\n\nRequires API key authentication. Permanently deletes the knowledge base.",
          "operationId": "delete_knowledge_base_tenants__tenant_id__knowledge_bases__kb_id__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Kb Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/knowledge-bases/{kb_id}/sync": {
        "post": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Sync Knowledge Base",
          "description": "Manually sync all documents in a knowledge base to specified provider(s).\n\nRequires API key authentication. Syncs all documents to the specified provider,\nor all active providers if no provider is specified.",
          "operationId": "sync_knowledge_base_tenants__tenant_id__knowledge_bases__kb_id__sync_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Kb Id"
              }
            },
            {
              "name": "provider",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Optional provider to sync. If not specified, syncs all providers.",
                "title": "Provider"
              },
              "description": "Optional provider to sync. If not specified, syncs all providers."
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/SyncStatusResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/knowledge-bases/{kb_id}/sync-status": {
        "get": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Get Sync Status",
          "description": "Get sync status for all providers in a knowledge base.\n\nRequires API key authentication. Returns sync status per provider.",
          "operationId": "get_sync_status_tenants__tenant_id__knowledge_bases__kb_id__sync_status_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Kb Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/knowledge-bases/{kb_id}/providers/{provider}": {
        "delete": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Disable Provider",
          "description": "Disable a provider for a knowledge base and optionally cleanup data.\n\nRequires API key authentication. Soft disables the provider (keeps data unless delete_data=true).",
          "operationId": "disable_provider_tenants__tenant_id__knowledge_bases__kb_id__providers__provider__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Kb Id"
              }
            },
            {
              "name": "provider",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Provider"
              }
            },
            {
              "name": "delete_data",
              "in": "query",
              "required": false,
              "schema": {
                "type": "boolean",
                "description": "If true, delete data from provider store",
                "default": false,
                "title": "Delete Data"
              },
              "description": "If true, delete data from provider store"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/mcp-servers": {
        "post": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "Create Mcp Server",
          "description": "Create a new MCP (Model Context Protocol) server for a tenant.\n\nRequires API key authentication. MCP servers enable integration with external\nservices via the Model Context Protocol.\n\n**Endpoint Validation:**\n- Must be http, https, ws, or wss protocol\n- Cannot point to internal/private networks (SSRF protection)\n\n**Example Request:**\n```json\n{\n    \"name\": \"crm_server\",\n    \"endpoint\": \"https://mcp.example.com/api\",\n    \"auth_config\": {\n        \"type\": \"api_key\",\n        \"key\": \"secret_key_here\"\n    }\n}\n```",
          "operationId": "create_mcp_server_tenants__tenant_id__mcp_servers_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateMCPServerRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MCPServerResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "get": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "List Mcp Servers",
          "description": "List all MCP servers for a tenant.\n\nRequires API key authentication. Supports optional filtering by active status.",
          "operationId": "list_mcp_servers_tenants__tenant_id__mcp_servers_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "is_active",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by active status",
                "title": "Is Active"
              },
              "description": "Filter by active status"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/mcp-servers/{server_id}": {
        "get": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "Get Mcp Server",
          "description": "Get MCP server details by ID.\n\nRequires API key authentication. Returns 404 if not found.",
          "operationId": "get_mcp_server_tenants__tenant_id__mcp_servers__server_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "server_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Server Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MCPServerResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "put": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "Update Mcp Server",
          "description": "Update MCP server configuration.\n\nRequires API key authentication. Only provided fields will be updated.\nEndpoint validation (SSRF protection) applies if endpoint is updated.",
          "operationId": "update_mcp_server_tenants__tenant_id__mcp_servers__server_id__put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "server_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Server Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateMCPServerRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MCPServerResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "Delete Mcp Server",
          "description": "Delete an MCP server.\n\nRequires API key authentication. Permanently deletes the MCP server and all associated tools.",
          "operationId": "delete_mcp_server_tenants__tenant_id__mcp_servers__server_id__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "server_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Server Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/mcp-servers/{server_id}/tools": {
        "get": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "List Mcp Server Tools",
          "description": "List all tools for an MCP server.\n\nRequires API key authentication. Returns tools registered for the specified MCP server.",
          "operationId": "list_mcp_server_tools_tenants__tenant_id__mcp_servers__server_id__tools_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "server_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Server Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "Create Mcp Server Tool",
          "description": "Create or update a tool for an MCP server.\n\nRequires API key authentication. If a tool with the same name exists, it will be updated.",
          "operationId": "create_mcp_server_tool_tenants__tenant_id__mcp_servers__server_id__tools_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "server_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Server Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateMCPServerToolRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/MCPServerToolResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/mcp-servers/{server_id}/tools/{tool_name}": {
        "delete": {
          "tags": [
            "MCP Servers"
          ],
          "summary": "Delete Mcp Server Tool",
          "description": "Delete a tool from an MCP server.\n\nRequires API key authentication. Permanently removes the tool registration.",
          "operationId": "delete_mcp_server_tool_tenants__tenant_id__mcp_servers__server_id__tools__tool_name__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "server_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Server Id"
              }
            },
            {
              "name": "tool_name",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tool Name"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/channels": {
        "get": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "List Channels",
          "description": "List all channels for a tenant.\n\nRequires API key authentication. Returns all channels configured for the tenant.",
          "operationId": "list_channels_tenants__tenant_id__channels_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "channel_type",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by channel type",
                "title": "Channel Type"
              },
              "description": "Filter by channel type"
            },
            {
              "name": "is_active",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by active status",
                "title": "Is Active"
              },
              "description": "Filter by active status"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ChannelListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Create Channel",
          "description": "Create a new channel for a tenant.\n\nRequires API key authentication. Creates a new channel configuration.\n\n**Example Request:**\n```json\n{\n    \"name\": \"whatsapp-main\",\n    \"channel_type\": \"whatsapp\",\n    \"external_id\": \"+1234567890\",\n    \"config\": {\n        \"webhook_url\": \"https://example.com/webhook\"\n    },\n    \"is_active\": true\n}\n```",
          "operationId": "create_channel_tenants__tenant_id__channels_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateChannelRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ChannelResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/channels/{channel_id}": {
        "get": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Get Channel",
          "description": "Get channel details by ID.\n\nRequires API key authentication. Returns 404 if not found.",
          "operationId": "get_channel_tenants__tenant_id__channels__channel_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "channel_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Channel Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ChannelResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "put": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Update Channel",
          "description": "Update channel configuration.\n\nRequires API key authentication. Only provided fields will be updated.",
          "operationId": "update_channel_tenants__tenant_id__channels__channel_id__put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "channel_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Channel Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateChannelRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/ChannelResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Tenant Management"
          ],
          "summary": "Delete Channel",
          "description": "Delete or deactivate a channel.\n\nRequires API key authentication. Permanently deletes the channel.\nNote: This will set channel_id to NULL in related conversations and messages (due to ON DELETE SET NULL).",
          "operationId": "delete_channel_tenants__tenant_id__channels__channel_id__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "channel_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Channel Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/rag/documents": {
        "get": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "List Rag Documents",
          "description": "List RAG documents for a tenant.\n\nRequires API key authentication. Returns all RAG documents for the tenant,\noptionally filtered by knowledge base name.",
          "operationId": "list_rag_documents_tenants__tenant_id__rag_documents_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "kb_name",
              "in": "query",
              "required": false,
              "schema": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Filter by knowledge base name",
                "title": "Kb Name"
              },
              "description": "Filter by knowledge base name"
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RAGDocumentListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Create Rag Document",
          "description": "Create a new RAG document with automatic chunking and embedding.\n\nRequires API key authentication. Creates a document, splits it into chunks,\ngenerates embeddings for each chunk, and stores them in the database.\n\n**Example Request:**\n```json\n{\n    \"kb_name\": \"support_faq\",\n    \"title\": \"FAQ: Getting Started\",\n    \"content\": \"This is a long document that will be chunked...\",\n    \"metadata\": {\"source\": \"website\"},\n    \"chunk_size\": 1000,\n    \"chunk_overlap\": 200\n}\n```",
          "operationId": "create_rag_document_tenants__tenant_id__rag_documents_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateRAGDocumentRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RAGDocumentResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/rag/documents/{doc_id}": {
        "get": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Get Rag Document",
          "description": "Get RAG document details by ID.\n\nRequires API key authentication. Returns 404 if not found.",
          "operationId": "get_rag_document_tenants__tenant_id__rag_documents__doc_id__get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "doc_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Doc Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RAGDocumentResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "put": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Update Rag Document",
          "description": "Update RAG document.\n\nRequires API key authentication. Only provided fields will be updated.\nNote: Updating content does NOT automatically reindex chunks. Use /reindex endpoint for that.",
          "operationId": "update_rag_document_tenants__tenant_id__rag_documents__doc_id__put",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "doc_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Doc Id"
              }
            }
          ],
          "requestBody": {
            "required": true,
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateRAGDocumentRequest"
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RAGDocumentResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        },
        "delete": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Delete Rag Document",
          "description": "Delete a RAG document and all its chunks.\n\nRequires API key authentication. Permanently deletes the document and all associated chunks.",
          "operationId": "delete_rag_document_tenants__tenant_id__rag_documents__doc_id__delete",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "doc_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Doc Id"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/rag/documents/{doc_id}/reindex": {
        "post": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "Reindex Rag Document",
          "description": "Reindex a RAG document (rechunk and regenerate embeddings).\n\nRequires API key authentication. Deletes existing chunks and recreates them\nwith new chunking parameters and fresh embeddings.\n\nUseful when:\n- Document content was updated\n- Chunking parameters need to change\n- Embeddings need to be regenerated",
          "operationId": "reindex_rag_document_tenants__tenant_id__rag_documents__doc_id__reindex_post",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "doc_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Doc Id"
              }
            },
            {
              "name": "chunk_size",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 10000,
                "minimum": 100,
                "description": "Character count per chunk",
                "default": 1000,
                "title": "Chunk Size"
              },
              "description": "Character count per chunk"
            },
            {
              "name": "chunk_overlap",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 500,
                "minimum": 0,
                "description": "Character overlap between chunks",
                "default": 200,
                "title": "Chunk Overlap"
              },
              "description": "Character overlap between chunks"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
  
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      },
      "/tenants/{tenant_id}/rag/documents/{doc_id}/chunks": {
        "get": {
          "tags": [
            "Knowledge Bases"
          ],
          "summary": "List Rag Document Chunks",
          "description": "List all chunks for a RAG document.\n\nRequires API key authentication. Returns all chunks associated with the document,\nordered by chunk_index.",
          "operationId": "list_rag_document_chunks_tenants__tenant_id__rag_documents__doc_id__chunks_get",
          "security": [
            {
              "APIKeyHeader": []
            },
            {
              "APIKeyQuery": []
            }
          ],
          "parameters": [
            {
              "name": "tenant_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Tenant Id"
              }
            },
            {
              "name": "doc_id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string",
                "title": "Doc Id"
              }
            },
            {
              "name": "limit",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "maximum": 1000,
                "minimum": 1,
                "description": "Maximum number of results",
                "default": 100,
                "title": "Limit"
              },
              "description": "Maximum number of results"
            },
            {
              "name": "offset",
              "in": "query",
              "required": false,
              "schema": {
                "type": "integer",
                "minimum": 0,
                "description": "Offset for pagination",
                "default": 0,
                "title": "Offset"
              },
              "description": "Offset for pagination"
            }
          ],
          "responses": {
            "200": {
              "description": "Successful Response",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/RAGChunkListResponse"
                  }
                }
              }
            },
            "422": {
              "description": "Validation Error",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/HTTPValidationError"
                  }
                }
              }
            }
          }
        }
      }
    },
    "components": {
      "schemas": {
        "CanonicalMessage": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id",
              "description": "UUID of the message"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id",
              "description": "UUID of the tenant"
            },
            "conversation_id": {
              "type": "string",
              "title": "Conversation Id",
              "description": "UUID of the conversation"
            },
            "channel": {
              "type": "string",
              "title": "Channel",
              "description": "Channel type: 'whatsapp' | 'web' | 'slack' | 'email' | 'telegram'"
            },
            "direction": {
              "type": "string",
              "title": "Direction",
              "description": "'inbound' | 'outbound'"
            },
            "source_message_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Source Message Id",
              "description": "Original message ID from channel"
            },
            "from": {
              "$ref": "#/components/schemas/MessageParty",
              "description": "Sender party"
            },
            "to": {
              "$ref": "#/components/schemas/MessageParty",
              "description": "Recipient party"
            },
            "content": {
              "$ref": "#/components/schemas/MessageContent",
              "description": "Message content"
            },
            "metadata": {
              "additionalProperties": true,
              "type": "object",
              "title": "Metadata",
              "description": "Additional metadata"
            },
            "timestamp": {
              "type": "string",
              "title": "Timestamp",
              "description": "ISO8601 timestamp"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "conversation_id",
            "channel",
            "direction",
            "from",
            "to",
            "content",
            "timestamp"
          ],
          "title": "CanonicalMessage",
          "description": "Canonical message format normalized from all channels."
        },
        "ChannelListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/ChannelResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "ChannelListResponse",
          "description": "Response model for listing channels."
        },
        "ChannelResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "name": {
              "type": "string",
              "title": "Name"
            },
            "channel_type": {
              "type": "string",
              "title": "Channel Type"
            },
            "external_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "External Id"
            },
            "config": {
              "additionalProperties": true,
              "type": "object",
              "title": "Config"
            },
            "is_active": {
              "type": "boolean",
              "title": "Is Active"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "name",
            "channel_type",
            "external_id",
            "config",
            "is_active",
            "created_at",
            "updated_at"
          ],
          "title": "ChannelResponse",
          "description": "Response model for channel."
        },
        "ConversationAnalyticsResponse": {
          "properties": {
            "total_conversations": {
              "type": "integer",
              "title": "Total Conversations"
            },
            "open_conversations": {
              "type": "integer",
              "title": "Open Conversations"
            },
            "closed_conversations": {
              "type": "integer",
              "title": "Closed Conversations"
            },
            "archived_conversations": {
              "type": "integer",
              "title": "Archived Conversations"
            },
            "resolved_conversations": {
              "type": "integer",
              "title": "Resolved Conversations"
            },
            "resolution_rate": {
              "type": "number",
              "title": "Resolution Rate"
            },
            "avg_messages_per_conversation": {
              "type": "number",
              "title": "Avg Messages Per Conversation"
            },
            "avg_tool_calls_per_conversation": {
              "type": "number",
              "title": "Avg Tool Calls Per Conversation"
            },
            "period_start": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period Start"
            },
            "period_end": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period End"
            }
          },
          "type": "object",
          "required": [
            "total_conversations",
            "open_conversations",
            "closed_conversations",
            "archived_conversations",
            "resolved_conversations",
            "resolution_rate",
            "avg_messages_per_conversation",
            "avg_tool_calls_per_conversation"
          ],
          "title": "ConversationAnalyticsResponse",
          "description": "Response model for conversation analytics."
        },
        "ConversationListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/ConversationResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            },
            "has_more": {
              "type": "boolean",
              "title": "Has More",
              "default": false
            },
            "next_offset": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Next Offset"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "ConversationListResponse",
          "description": "Response model for listing conversations."
        },
        "ConversationResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "channel_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Channel Id"
            },
            "external_thread_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "External Thread Id"
            },
            "subject": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subject"
            },
            "status": {
              "type": "string",
              "title": "Status"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "channel_id",
            "external_thread_id",
            "subject",
            "status",
            "created_at",
            "updated_at"
          ],
          "title": "ConversationResponse",
          "description": "Response model for conversation."
        },
        "ConversationStatsResponse": {
          "properties": {
            "conversation_id": {
              "type": "string",
              "title": "Conversation Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "resolved": {
              "type": "boolean",
              "title": "Resolved"
            },
            "resolution_time_ms": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Resolution Time Ms"
            },
            "total_messages": {
              "type": "integer",
              "title": "Total Messages"
            },
            "tool_calls": {
              "type": "integer",
              "title": "Tool Calls"
            },
            "risk_flags": {
              "type": "integer",
              "title": "Risk Flags"
            },
            "last_event_at": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Last Event At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "conversation_id",
            "tenant_id",
            "resolved",
            "resolution_time_ms",
            "total_messages",
            "tool_calls",
            "risk_flags",
            "last_event_at",
            "updated_at"
          ],
          "title": "ConversationStatsResponse",
          "description": "Response model for conversation statistics."
        },
        "CostBreakdownResponse": {
          "properties": {
            "total_cost": {
              "type": "number",
              "title": "Total Cost"
            },
            "llm_cost": {
              "type": "number",
              "title": "Llm Cost"
            },
            "tool_cost": {
              "type": "number",
              "title": "Tool Cost"
            },
            "by_provider": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object",
              "title": "By Provider"
            },
            "by_model": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object",
              "title": "By Model"
            },
            "by_tool": {
              "additionalProperties": {
                "type": "number"
              },
              "type": "object",
              "title": "By Tool"
            },
            "period_start": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period Start"
            },
            "period_end": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period End"
            },
            "currency": {
              "type": "string",
              "title": "Currency",
              "default": "USD"
            }
          },
          "type": "object",
          "required": [
            "total_cost",
            "llm_cost",
            "tool_cost",
            "by_provider",
            "by_model",
            "by_tool"
          ],
          "title": "CostBreakdownResponse",
          "description": "Response model for detailed cost breakdown."
        },
        "CostByConversationResponse": {
          "properties": {
            "items": {
              "items": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "array",
              "title": "Items"
            },
            "total_cost": {
              "type": "number",
              "title": "Total Cost"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            }
          },
          "type": "object",
          "required": [
            "items",
            "total_cost",
            "count"
          ],
          "title": "CostByConversationResponse",
          "description": "Response model for costs per conversation."
        },
        "CostByPeriodResponse": {
          "properties": {
            "items": {
              "items": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "array",
              "title": "Items"
            },
            "total_cost": {
              "type": "number",
              "title": "Total Cost"
            },
            "period_type": {
              "type": "string",
              "title": "Period Type"
            },
            "period_start": {
              "type": "string",
              "title": "Period Start"
            },
            "period_end": {
              "type": "string",
              "title": "Period End"
            }
          },
          "type": "object",
          "required": [
            "items",
            "total_cost",
            "period_type",
            "period_start",
            "period_end"
          ],
          "title": "CostByPeriodResponse",
          "description": "Response model for costs by time period."
        },
        "CostEstimateRequest": {
          "properties": {
            "provider": {
              "type": "string",
              "title": "Provider",
              "description": "LLM provider: 'openai' or 'gemini'"
            },
            "model": {
              "type": "string",
              "title": "Model",
              "description": "Model name"
            },
            "estimated_prompt_tokens": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Estimated Prompt Tokens",
              "description": "Estimated prompt tokens"
            },
            "estimated_completion_tokens": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Estimated Completion Tokens",
              "description": "Estimated completion tokens"
            },
            "estimated_total_tokens": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Estimated Total Tokens",
              "description": "Estimated total tokens (if prompt/completion not available)"
            }
          },
          "type": "object",
          "required": [
            "provider",
            "model"
          ],
          "title": "CostEstimateRequest",
          "description": "Request model for cost estimation."
        },
        "CostEstimateResponse": {
          "properties": {
            "estimated_cost": {
              "type": "number",
              "title": "Estimated Cost"
            },
            "provider": {
              "type": "string",
              "title": "Provider"
            },
            "model": {
              "type": "string",
              "title": "Model"
            },
            "currency": {
              "type": "string",
              "title": "Currency",
              "default": "USD"
            },
            "breakdown": {
              "additionalProperties": true,
              "type": "object",
              "title": "Breakdown"
            }
          },
          "type": "object",
          "required": [
            "estimated_cost",
            "provider",
            "model",
            "breakdown"
          ],
          "title": "CostEstimateResponse",
          "description": "Response model for cost estimation."
        },
        "CostSummaryResponse": {
          "properties": {
            "total_cost": {
              "type": "number",
              "title": "Total Cost"
            },
            "llm_cost": {
              "type": "number",
              "title": "Llm Cost"
            },
            "tool_cost": {
              "type": "number",
              "title": "Tool Cost"
            },
            "period_start": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period Start"
            },
            "period_end": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period End"
            },
            "currency": {
              "type": "string",
              "title": "Currency",
              "default": "USD"
            }
          },
          "type": "object",
          "required": [
            "total_cost",
            "llm_cost",
            "tool_cost"
          ],
          "title": "CostSummaryResponse",
          "description": "Response model for cost summary."
        },
        "CreateAPIKeyRequest": {
          "properties": {
            "name": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Name"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Description"
            },
            "expires_in_days": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Expires In Days"
            },
            "rate_limit_per_minute": {
              "type": "integer",
              "title": "Rate Limit Per Minute",
              "default": 100
            },
            "metadata": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Metadata"
            }
          },
          "type": "object",
          "title": "CreateAPIKeyRequest",
          "description": "Request model for creating an API key."
        },
        "CreateChannelRequest": {
          "properties": {
            "name": {
              "type": "string",
              "title": "Name",
              "description": "Channel name (unique per tenant)",
              "example": "whatsapp-main"
            },
            "channel_type": {
              "type": "string",
              "title": "Channel Type",
              "description": "Channel type: 'whatsapp', 'web', 'slack', 'telegram', etc.",
              "example": "whatsapp"
            },
            "external_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "External Id",
              "description": "External channel ID (e.g., WhatsApp number, Slack app ID)",
              "example": "+1234567890"
            },
            "config": {
              "additionalProperties": true,
              "type": "object",
              "title": "Config",
              "description": "Channel-specific configuration (JSONB)",
              "example": {
  
              }
            },
            "is_active": {
              "type": "boolean",
              "title": "Is Active",
              "description": "Whether the channel is active",
              "default": true
            }
          },
          "type": "object",
          "required": [
            "name",
            "channel_type"
          ],
          "title": "CreateChannelRequest",
          "description": "Request model for creating a channel."
        },
        "CreateKnowledgeBaseRequest": {
          "properties": {
            "name": {
              "type": "string",
              "title": "Name",
              "description": "Knowledge base name (unique per tenant)",
              "example": "support_faq"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Description",
              "description": "Knowledge base description",
              "example": "Support FAQ knowledge base"
            },
            "providers": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Providers",
              "description": "Optional list of providers to enable. Defaults to all enabled tools.",
              "example": [
                "internal_rag",
                "openai_file",
                "gemini_file"
              ]
            }
          },
          "type": "object",
          "required": [
            "name"
          ],
          "title": "CreateKnowledgeBaseRequest",
          "description": "Request model for creating a knowledge base."
        },
        "CreateMCPServerRequest": {
          "properties": {
            "name": {
              "type": "string",
              "title": "Name",
              "description": "MCP server name (unique per tenant)",
              "example": "crm_server"
            },
            "endpoint": {
              "type": "string",
              "title": "Endpoint",
              "description": "MCP server endpoint (http/https/ws/wss)",
              "example": "https://mcp.example.com/api"
            },
            "auth_config": {
              "additionalProperties": true,
              "type": "object",
              "title": "Auth Config",
              "description": "Authentication configuration (JSONB)",
              "example": {
                "key": "secret",
                "type": "api_key"
              }
            }
          },
          "type": "object",
          "required": [
            "name",
            "endpoint",
            "auth_config"
          ],
          "title": "CreateMCPServerRequest",
          "description": "Request model for creating an MCP server."
        },
        "CreateMCPServerToolRequest": {
          "properties": {
            "tool_name": {
              "type": "string",
              "title": "Tool Name",
              "description": "Tool name as exposed by MCP server",
              "example": "get_customer"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Description",
              "description": "Tool description",
              "example": "Get customer information by ID"
            },
            "schema": {
              "additionalProperties": true,
              "type": "object",
              "title": "Schema",
              "description": "Tool schema (JSON Schema)",
              "example": {
                "properties": {
  
                },
                "type": "object"
              }
            }
          },
          "type": "object",
          "required": [
            "tool_name"
          ],
          "title": "CreateMCPServerToolRequest",
          "description": "Request model for creating/updating an MCP server tool."
        },
        "CreateRAGDocumentRequest": {
          "properties": {
            "kb_name": {
              "type": "string",
              "title": "Kb Name",
              "description": "Knowledge base name (must exist)",
              "example": "support_faq"
            },
            "external_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "External Id",
              "description": "External document ID (file ID, URL, etc.)",
              "example": "doc-123"
            },
            "title": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Title",
              "description": "Document title",
              "example": "FAQ: Getting Started"
            },
            "content": {
              "type": "string",
              "title": "Content",
              "description": "Document content text",
              "example": "This is the document content..."
            },
            "metadata": {
              "additionalProperties": true,
              "type": "object",
              "title": "Metadata",
              "description": "Document metadata (JSONB)",
              "example": {
  
              }
            },
            "chunk_size": {
              "type": "integer",
              "maximum": 10000,
              "minimum": 100,
              "title": "Chunk Size",
              "description": "Character count per chunk",
              "default": 1000
            },
            "chunk_overlap": {
              "type": "integer",
              "maximum": 500,
              "minimum": 0,
              "title": "Chunk Overlap",
              "description": "Character overlap between chunks",
              "default": 200
            }
          },
          "type": "object",
          "required": [
            "kb_name",
            "content"
          ],
          "title": "CreateRAGDocumentRequest",
          "description": "Request model for creating a RAG document."
        },
        "EnableToolRequest": {
          "properties": {
            "tool_name": {
              "type": "string",
              "title": "Tool Name",
              "description": "Canonical tool name",
              "example": "openai_file_search"
            },
            "config_override": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Config Override",
              "description": "Optional configuration override for this tenant",
              "example": {
  
              }
            }
          },
          "type": "object",
          "required": [
            "tool_name"
          ],
          "title": "EnableToolRequest",
          "description": "Request model for enabling a tool for a tenant."
        },
        "GetPromptResponse": {
          "properties": {
            "custom_system_prompt": {
              "type": "string",
              "title": "Custom System Prompt"
            },
            "override_mode": {
              "type": "string",
              "title": "Override Mode"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            },
            "validation_status": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Validation Status"
            },
            "effective_prompt": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Effective Prompt"
            }
          },
          "type": "object",
          "required": [
            "custom_system_prompt",
            "override_mode",
            "created_at",
            "updated_at"
          ],
          "title": "GetPromptResponse",
          "description": "Response model for getting tenant prompt."
        },
        "HTTPValidationError": {
          "properties": {
            "detail": {
              "items": {
                "$ref": "#/components/schemas/ValidationError"
              },
              "type": "array",
              "title": "Detail"
            }
          },
          "type": "object",
          "title": "HTTPValidationError"
        },
        "InboundMessageResponse": {
          "properties": {
            "status": {
              "type": "string",
              "title": "Status",
              "example": "success"
            },
            "message": {
              "additionalProperties": true,
              "type": "object",
              "title": "Message",
              "description": "Outbound message details"
            },
            "latency_ms": {
              "type": "integer",
              "title": "Latency Ms",
              "description": "Total processing latency in milliseconds"
            },
            "tool_calls_executed": {
              "type": "integer",
              "title": "Tool Calls Executed",
              "description": "Number of tool calls executed",
              "default": 0
            }
          },
          "type": "object",
          "required": [
            "status",
            "message",
            "latency_ms"
          ],
          "title": "InboundMessageResponse",
          "description": "Response model for inbound message processing."
        },
        "KPISnapshotResponse": {
          "properties": {
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "period_type": {
              "type": "string",
              "title": "Period Type"
            },
            "period_start": {
              "type": "string",
              "title": "Period Start"
            },
            "period_end": {
              "type": "string",
              "title": "Period End"
            },
            "metric_name": {
              "type": "string",
              "title": "Metric Name"
            },
            "metric_value": {
              "type": "number",
              "title": "Metric Value"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            }
          },
          "type": "object",
          "required": [
            "tenant_id",
            "period_type",
            "period_start",
            "period_end",
            "metric_name",
            "metric_value",
            "created_at"
          ],
          "title": "KPISnapshotResponse",
          "description": "Response model for KPI snapshot."
        },
        "KPISnapshotsListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/KPISnapshotResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "KPISnapshotsListResponse",
          "description": "Response model for listing KPI snapshots."
        },
        "KnowledgeBaseResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "name": {
              "type": "string",
              "title": "Name"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Description"
            },
            "provider": {
              "type": "string",
              "title": "Provider"
            },
            "provider_config": {
              "additionalProperties": true,
              "type": "object",
              "title": "Provider Config"
            },
            "is_active": {
              "type": "boolean",
              "title": "Is Active"
            },
            "provider_sync_status": {
              "anyOf": [
                {
                  "items": {
                    "$ref": "#/components/schemas/ProviderSyncStatus"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Provider Sync Status",
              "description": "Sync status per provider"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "name",
            "description",
            "provider",
            "provider_config",
            "is_active",
            "created_at",
            "updated_at"
          ],
          "title": "KnowledgeBaseResponse",
          "description": "Response model for knowledge base."
        },
        "KnowledgeBasesListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/KnowledgeBaseResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "KnowledgeBasesListResponse",
          "description": "Response model for listing knowledge bases."
        },
        "LLMTraceListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/LLMTraceResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            },
            "has_more": {
              "type": "boolean",
              "title": "Has More",
              "default": false
            },
            "next_offset": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Next Offset"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "LLMTraceListResponse",
          "description": "Response model for listing LLM traces."
        },
        "LLMTraceResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "conversation_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Conversation Id"
            },
            "message_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Message Id"
            },
            "provider": {
              "type": "string",
              "title": "Provider"
            },
            "model": {
              "type": "string",
              "title": "Model"
            },
            "request_payload": {
              "additionalProperties": true,
              "type": "object",
              "title": "Request Payload"
            },
            "response_payload": {
              "additionalProperties": true,
              "type": "object",
              "title": "Response Payload"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "conversation_id",
            "message_id",
            "provider",
            "model",
            "request_payload",
            "response_payload",
            "created_at"
          ],
          "title": "LLMTraceResponse",
          "description": "Response model for LLM trace."
        },
        "LogQueryResponse": {
          "properties": {
            "items": {
              "items": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "array",
              "title": "Items"
            },
            "total": {
              "type": "integer",
              "title": "Total"
            },
            "limit": {
              "type": "integer",
              "title": "Limit"
            },
            "offset": {
              "type": "integer",
              "title": "Offset"
            },
            "has_more": {
              "type": "boolean",
              "title": "Has More"
            }
          },
          "type": "object",
          "required": [
            "items",
            "total",
            "limit",
            "offset",
            "has_more"
          ],
          "title": "LogQueryResponse",
          "description": "Response model for log queries."
        },
        "MCPServerResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "name": {
              "type": "string",
              "title": "Name"
            },
            "endpoint": {
              "type": "string",
              "title": "Endpoint"
            },
            "auth_config": {
              "additionalProperties": true,
              "type": "object",
              "title": "Auth Config"
            },
            "is_active": {
              "type": "boolean",
              "title": "Is Active"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "name",
            "endpoint",
            "auth_config",
            "is_active",
            "created_at",
            "updated_at"
          ],
          "title": "MCPServerResponse",
          "description": "Response model for MCP server."
        },
        "MCPServerToolResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "mcp_server_id": {
              "type": "string",
              "title": "Mcp Server Id"
            },
            "tool_name": {
              "type": "string",
              "title": "Tool Name"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Description"
            },
            "schema": {
              "additionalProperties": true,
              "type": "object",
              "title": "Schema"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "mcp_server_id",
            "tool_name",
            "description",
            "schema",
            "created_at",
            "updated_at"
          ],
          "title": "MCPServerToolResponse",
          "description": "Response model for MCP server tool."
        },
        "MessageContent": {
          "properties": {
            "type": {
              "type": "string",
              "title": "Type",
              "description": "Content type, v1: only 'text'",
              "default": "text"
            },
            "text": {
              "type": "string",
              "title": "Text",
              "description": "Message text content"
            }
          },
          "type": "object",
          "required": [
            "text"
          ],
          "title": "MessageContent",
          "description": "Message content structure."
        },
        "MessageListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/MessageResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            },
            "has_more": {
              "type": "boolean",
              "title": "Has More",
              "default": false
            },
            "next_offset": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Next Offset"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "MessageListResponse",
          "description": "Response model for listing messages."
        },
        "MessageParty": {
          "properties": {
            "type": {
              "type": "string",
              "title": "Type",
              "description": "'user' | 'bot'"
            },
            "external_id": {
              "type": "string",
              "title": "External Id",
              "description": "External identifier from channel"
            },
            "display_name": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Display Name"
            }
          },
          "type": "object",
          "required": [
            "type",
            "external_id"
          ],
          "title": "MessageParty",
          "description": "Represents a party (user or bot) in a message."
        },
        "MessageResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "conversation_id": {
              "type": "string",
              "title": "Conversation Id"
            },
            "channel_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Channel Id"
            },
            "direction": {
              "type": "string",
              "title": "Direction"
            },
            "source_message_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Source Message Id"
            },
            "from_type": {
              "type": "string",
              "title": "From Type"
            },
            "from_external_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From External Id"
            },
            "from_display_name": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "From Display Name"
            },
            "content_type": {
              "type": "string",
              "title": "Content Type"
            },
            "content_text": {
              "type": "string",
              "title": "Content Text"
            },
            "metadata": {
              "additionalProperties": true,
              "type": "object",
              "title": "Metadata"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "conversation_id",
            "channel_id",
            "direction",
            "source_message_id",
            "from_type",
            "from_external_id",
            "from_display_name",
            "content_type",
            "content_text",
            "metadata",
            "created_at"
          ],
          "title": "MessageResponse",
          "description": "Response model for message."
        },
        "PromptUpdateResponse": {
          "properties": {
            "status": {
              "type": "string",
              "title": "Status"
            },
            "effective_prompt": {
              "type": "string",
              "title": "Effective Prompt"
            },
            "validation_status": {
              "type": "string",
              "title": "Validation Status"
            },
            "issues": {
              "items": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "array",
              "title": "Issues",
              "default": []
            }
          },
          "type": "object",
          "required": [
            "status",
            "effective_prompt",
            "validation_status"
          ],
          "title": "PromptUpdateResponse",
          "description": "Response model for prompt update."
        },
        "ProviderSyncStatus": {
          "properties": {
            "provider": {
              "type": "string",
              "title": "Provider",
              "description": "Provider name",
              "example": "openai_file"
            },
            "is_active": {
              "type": "boolean",
              "title": "Is Active",
              "description": "Whether provider is active"
            },
            "sync_status": {
              "type": "string",
              "title": "Sync Status",
              "description": "Sync status: 'enabled', 'disabled', 'syncing', 'error'",
              "example": "enabled"
            },
            "store_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Store Id",
              "description": "Store ID (vector_store_id or file_search_store_name)"
            },
            "last_sync_at": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Last Sync At",
              "description": "Last sync timestamp"
            },
            "error_message": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Error Message",
              "description": "Error message if sync failed"
            }
          },
          "type": "object",
          "required": [
            "provider",
            "is_active",
            "sync_status"
          ],
          "title": "ProviderSyncStatus",
          "description": "Response model for provider sync status."
        },
        "RAGChunkListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/RAGChunkResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "RAGChunkListResponse",
          "description": "Response model for listing RAG chunks."
        },
        "RAGChunkResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "kb_name": {
              "type": "string",
              "title": "Kb Name"
            },
            "document_id": {
              "type": "string",
              "title": "Document Id"
            },
            "chunk_index": {
              "type": "integer",
              "title": "Chunk Index"
            },
            "content": {
              "type": "string",
              "title": "Content"
            },
            "metadata": {
              "additionalProperties": true,
              "type": "object",
              "title": "Metadata"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "kb_name",
            "document_id",
            "chunk_index",
            "content",
            "metadata",
            "created_at"
          ],
          "title": "RAGChunkResponse",
          "description": "Response model for RAG chunk."
        },
        "RAGDocumentListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/RAGDocumentResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            },
            "has_more": {
              "type": "boolean",
              "title": "Has More",
              "default": false
            },
            "next_offset": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Next Offset"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "RAGDocumentListResponse",
          "description": "Response model for listing RAG documents."
        },
        "RAGDocumentResponse": {
          "properties": {
            "id": {
              "type": "string",
              "title": "Id"
            },
            "tenant_id": {
              "type": "string",
              "title": "Tenant Id"
            },
            "kb_name": {
              "type": "string",
              "title": "Kb Name"
            },
            "external_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "External Id"
            },
            "title": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Title"
            },
            "content": {
              "type": "string",
              "title": "Content"
            },
            "metadata": {
              "additionalProperties": true,
              "type": "object",
              "title": "Metadata"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "id",
            "tenant_id",
            "kb_name",
            "external_id",
            "title",
            "content",
            "metadata",
            "created_at",
            "updated_at"
          ],
          "title": "RAGDocumentResponse",
          "description": "Response model for RAG document."
        },
        "SyncStatusResponse": {
          "properties": {
            "status": {
              "type": "string",
              "title": "Status",
              "description": "Overall sync status",
              "example": "completed"
            },
            "results": {
              "additionalProperties": {
                "additionalProperties": true,
                "type": "object"
              },
              "type": "object",
              "title": "Results",
              "description": "Sync results per provider"
            },
            "total_documents": {
              "type": "integer",
              "title": "Total Documents",
              "description": "Total documents processed"
            },
            "synced_documents": {
              "type": "integer",
              "title": "Synced Documents",
              "description": "Number of documents successfully synced"
            },
            "failed_documents": {
              "type": "integer",
              "title": "Failed Documents",
              "description": "Number of documents that failed to sync"
            }
          },
          "type": "object",
          "required": [
            "status",
            "results",
            "total_documents",
            "synced_documents",
            "failed_documents"
          ],
          "title": "SyncStatusResponse",
          "description": "Response model for sync status."
        },
        "TelegramWebhookResponse": {
          "properties": {
            "status": {
              "type": "string",
              "title": "Status",
              "example": "success"
            },
            "message": {
              "type": "string",
              "title": "Message",
              "example": "Message processed and sent to Telegram"
            },
            "latency_ms": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Latency Ms"
            }
          },
          "type": "object",
          "required": [
            "status",
            "message"
          ],
          "title": "TelegramWebhookResponse",
          "description": "Response model for Telegram webhook."
        },
        "TenantToolResponse": {
          "properties": {
            "tool_id": {
              "type": "string",
              "title": "Tool Id"
            },
            "tool_name": {
              "type": "string",
              "title": "Tool Name"
            },
            "description": {
              "type": "string",
              "title": "Description"
            },
            "provider": {
              "type": "string",
              "title": "Provider"
            },
            "is_enabled": {
              "type": "boolean",
              "title": "Is Enabled"
            },
            "config_override": {
              "additionalProperties": true,
              "type": "object",
              "title": "Config Override"
            },
            "created_at": {
              "type": "string",
              "title": "Created At"
            },
            "updated_at": {
              "type": "string",
              "title": "Updated At"
            }
          },
          "type": "object",
          "required": [
            "tool_id",
            "tool_name",
            "description",
            "provider",
            "is_enabled",
            "config_override",
            "created_at",
            "updated_at"
          ],
          "title": "TenantToolResponse",
          "description": "Response model for tenant tool policy."
        },
        "TenantToolsListResponse": {
          "properties": {
            "items": {
              "items": {
                "$ref": "#/components/schemas/TenantToolResponse"
              },
              "type": "array",
              "title": "Items"
            },
            "count": {
              "type": "integer",
              "title": "Count"
            }
          },
          "type": "object",
          "required": [
            "items",
            "count"
          ],
          "title": "TenantToolsListResponse",
          "description": "Response model for listing tenant tools."
        },
        "UpdateChannelRequest": {
          "properties": {
            "name": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Name"
            },
            "channel_type": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Channel Type"
            },
            "external_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "External Id"
            },
            "config": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Config"
            },
            "is_active": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          },
          "type": "object",
          "title": "UpdateChannelRequest",
          "description": "Request model for updating a channel."
        },
        "UpdateConversationRequest": {
          "properties": {
            "subject": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subject"
            },
            "status": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status",
              "description": "Status: 'open', 'closed', 'archived'",
              "example": "closed"
            }
          },
          "type": "object",
          "title": "UpdateConversationRequest",
          "description": "Request model for updating a conversation."
        },
        "UpdateKnowledgeBaseRequest": {
          "properties": {
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Description"
            },
            "provider_config": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Provider Config"
            },
            "is_active": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          },
          "type": "object",
          "title": "UpdateKnowledgeBaseRequest",
          "description": "Request model for updating a knowledge base."
        },
        "UpdateMCPServerRequest": {
          "properties": {
            "endpoint": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Endpoint"
            },
            "auth_config": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Auth Config"
            },
            "is_active": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          },
          "type": "object",
          "title": "UpdateMCPServerRequest",
          "description": "Request model for updating an MCP server."
        },
        "UpdatePromptRequest": {
          "properties": {
            "custom_system_prompt": {
              "type": "string",
              "title": "Custom System Prompt",
              "description": "Custom system prompt text",
              "example": "You are a helpful assistant for ACME Corp."
            },
            "override_mode": {
              "type": "string",
              "title": "Override Mode",
              "description": "Override mode: 'append' or 'replace_behavior'",
              "default": "append",
              "example": "append"
            }
          },
          "type": "object",
          "required": [
            "custom_system_prompt"
          ],
          "title": "UpdatePromptRequest",
          "description": "Request model for tenant prompt update."
        },
        "UpdateRAGDocumentRequest": {
          "properties": {
            "title": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Title"
            },
            "content": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Content"
            },
            "metadata": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Metadata"
            }
          },
          "type": "object",
          "title": "UpdateRAGDocumentRequest",
          "description": "Request model for updating a RAG document."
        },
        "UpdateToolPolicyRequest": {
          "properties": {
            "is_enabled": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Enabled",
              "description": "Enable or disable the tool",
              "example": true
            },
            "config_override": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Config Override",
              "description": "Configuration override for this tenant",
              "example": {
  
              }
            }
          },
          "type": "object",
          "title": "UpdateToolPolicyRequest",
          "description": "Request model for updating a tool policy."
        },
        "UsageStatisticsResponse": {
          "properties": {
            "total_messages": {
              "type": "integer",
              "title": "Total Messages"
            },
            "total_conversations": {
              "type": "integer",
              "title": "Total Conversations"
            },
            "total_tool_calls": {
              "type": "integer",
              "title": "Total Tool Calls"
            },
            "total_llm_calls": {
              "type": "integer",
              "title": "Total Llm Calls"
            },
            "active_conversations": {
              "type": "integer",
              "title": "Active Conversations"
            },
            "period_start": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period Start"
            },
            "period_end": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period End"
            }
          },
          "type": "object",
          "required": [
            "total_messages",
            "total_conversations",
            "total_tool_calls",
            "total_llm_calls",
            "active_conversations"
          ],
          "title": "UsageStatisticsResponse",
          "description": "Response model for usage statistics."
        },
        "ValidationError": {
          "properties": {
            "loc": {
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "integer"
                  }
                ]
              },
              "type": "array",
              "title": "Location"
            },
            "msg": {
              "type": "string",
              "title": "Message"
            },
            "type": {
              "type": "string",
              "title": "Error Type"
            }
          },
          "type": "object",
          "required": [
            "loc",
            "msg",
            "type"
          ],
          "title": "ValidationError"
        }
      },
      "securitySchemes": {
        "APIKeyHeader": {
          "type": "apiKey",
          "in": "header",
          "name": "X-API-Key"
        },
        "APIKeyQuery": {
          "type": "apiKey",
          "in": "query",
          "name": "api_key"
        },
        "ApiKeyAuth": {
          "type": "apiKey",
          "in": "header",
          "name": "X-API-Key",
          "description": "API Key authentication. Provide your API key in the X-API-Key header or as api_key query parameter."
        }
      }
    }
  }